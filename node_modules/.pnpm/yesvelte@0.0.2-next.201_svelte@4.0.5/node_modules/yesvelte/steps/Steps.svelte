<script>import { El } from "../el";
import { get_current_component } from "svelte/internal";
import { setContext } from "svelte";
import { writable } from "svelte/store";
export let color = void 0;
export let componentName = "steps";
export let vertical = void 0;
export let items = void 0;
export let counter = void 0;
export let active = 0;
const components = [
  { component: get_current_component(), except: [] },
  ...$$props.components ?? []
];
let element;
let stepComponents = [];
const activeStore = writable(active);
$:
  cssProps = {
    color,
    vertical,
    counter
  };
function register(props) {
  const index = stepComponents.length;
  stepComponents = [...stepComponents, index];
  if (props.active) {
    active = index;
  }
  return index;
}
function unregister(idx) {
  stepComponents = stepComponents.filter((comp, index) => index !== idx);
}
$:
  activeStore.set(active);
setContext("STEPS", { register, unregister, active: activeStore });
</script>

<El {components} {componentName} bind:element {...$$restProps} {cssProps}>
	{#if items}
		{#each items as item, index}
			<slot {item} {index} />
		{/each}
	{:else}
		<slot />
	{/if}
</El>
