<script>import { onMount } from "svelte";
import { El } from "../el";
import { get_current_component } from "svelte/internal";
export let componentName = "input";
export let disabled = void 0;
export let borderRounded = void 0;
export let borderFlush = void 0;
export let mask = void 0;
export let maskOptions = void 0;
export let placeholder = void 0;
export let readonly = void 0;
export let required = void 0;
export let size = void 0;
export let state = void 0;
export let type = void 0;
export let value = void 0;
export let name = void 0;
export let id = void 0;
export let min = void 0;
export let max = void 0;
export let minlength = void 0;
export let maxlength = void 0;
export let pattern = void 0;
export let step = void 0;
const components = [
  { component: get_current_component(), except: [] },
  ...$$props.components ?? []
];
let element;
onMount(async () => {
  const Inputmask = await import("inputmask");
  if (element !== void 0 && mask) {
    var im = new Inputmask.default(mask, maskOptions);
    im.mask(element);
  }
  return () => {
    if (element !== void 0 && mask) {
      Inputmask.default.remove(element);
    }
  };
});
let props = { componentName, placeholder, disabled, readonly, type };
let cssProps = { state, borderRounded, borderFlush };
let wrapperCssProps = { size };
$: {
  cssProps = {
    size,
    state,
    borderRounded,
    borderFlush
  };
  props = {
    componentName,
    placeholder,
    disabled,
    readonly,
    required,
    type,
    name,
    min,
    max,
    minlength,
    maxlength,
    pattern,
    step
  };
}
</script>

{#if $$slots.start || $$slots.end}
	<El
		{components}
		componentName="{componentName}-wrapper"
		{...$$restProps}
		cssProps={wrapperCssProps}>
		{#if $$slots.start}
			<El tag="span" componentName="{componentName}-icon">
				<slot name="start" />
			</El>
		{/if}
		<El tag="input" bind:value bind:element bind:id {...props} {cssProps} />
		{#if $$slots.end}
			<El tag="span" componentName="{componentName}-icon">
				<slot name="end" />
			</El>
		{/if}
	</El>
{:else}
	<El
		{...$$restProps}
		tag="input"
		bind:value
		bind:element
		bind:id
		{components}
		{...props}
		{cssProps} />
{/if}
